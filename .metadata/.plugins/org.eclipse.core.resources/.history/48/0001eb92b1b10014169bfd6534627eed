<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">



<f:view contentType="text/html">


<f:event listener="#{compraView.initConversation()}"
  type="preRenderView"></f:event>

<h:head>
	<link type="text/css" rel="stylesheet" href="#{request.contextPath}/css/default.css" />
	<link type="text/css" rel="stylesheet" href="#{request.contextPath}/css/syntaxhighlighter/syntaxhighlighter.css" />
	<link type="text/css" rel="stylesheet" href="#{request.contextPath}/css/compra/compraMetal.css" />
</h:head>





<h:form id="cotizacionForm">

<p:growl id="growl" showDetail="true"  life="4500" />

<p:confirmDialog global="true" showEffect="fade" hideEffect="explode">
        <p:commandButton value="SI" type="button" styleClass="ui-confirmdialog-yes" icon="ui-icon-check" />
        <p:commandButton value="No" type="button" styleClass="ui-confirmdialog-no" icon="ui-icon-close" />
    </p:confirmDialog>

<br />
<br />
<br />
	<table width="90%" align="center">
		<tr>
			<td width="50%">
				<p:commandButton action="#{compraView.navegacionCliente()}" value="ATRAS" icon="ui-icon-circle-triangle-w" 
									                styleClass="callToAction" validateClient="false">
				</p:commandButton>
			</td>
			<td width="50%" align="right" style="padding-right: 20px">
				<p:commandButton action="#{compraView.eventConfirmarOperacion()}" value="Confirmar" icon="ui-icon-disk" 
									                styleClass="callToAction" validateClient="false"
									                update="@form:growl"
									                >
					<p:confirm header="Confirmar" message="¿Seguro desea continuar con la operación? Los datos no se podrán reversar" icon="ui-icon-alert" />
				</p:commandButton>
			</td>
		</tr>
		<tr>
			<td colspan="2">
				Resumen de datos del cliente
				<div id="cotizacionForm:tablaArticulos" class="ui-datatable ui-widget" style="padding-top: 30px; ">
				<div class="ui-datatable-tablewrapper">
				<table role="grid" width="100%" style="text-align: left" >	
					<tr>
						<th  class="ui-state-default" role="columnheader" width="15%"> TIPO CLIENTE
						</th>
						<th class="ui-state-default" role="columnheader" width="15%"> NOMBRE
						</th>
						<th class="ui-state-default" role="columnheader" width="15%"> SEGUNDO NOMBRE
						</th>
						<th class="ui-state-default" role="columnheader" width="20%"> APELLIDO PATERNO
						</th >
						<th  class="ui-state-default" role="columnheader" width="20%"> APELLIDO MATERNO
						</th >
						<th  class="ui-state-default" role="columnheader" width="15%"> FECHA NACIMIENTO
						</th>
					</tr>
					<tr class="ui-widget-content ui-datatable-even" role="row">
						<td role="gridcell">
							<p:outputLabel value="#{compraView.tipoCliente}"/>
						</td>
						<td role="gridcell">
							<p:outputLabel value="#{compraView.cliente.nombre}"/>
						</td>
						<td role="gridcell">
							<p:outputLabel value="#{compraView.cliente.segundoNombre}"/>
						</td>
						<td role="gridcell">
							<p:outputLabel value="#{compraView.cliente.apellidoPaterno}"/>
						</td>
						<td role="gridcell">
							<p:outputLabel value="#{compraView.cliente.apellidoMaterno}"/>
						</td>					
						<td role="gridcell">
							<p:outputLabel value="#{compraView.cliente.fechaNacimientoFormateada}"/>
						</td>
					</tr>
				</table>
				</div>
				</div>
			</td>			
		</tr>
		
		
		<tr>
			<td colspan="2" style="padding-top: 30px"> <!-- RESUMEN ARTICULOS -->
				
				Resumen de artículos 
				
				<table id="tablaResumen" cellpadding="2px 10px" width="100%" style="font-size: 12px">
					<tr>
						<td style="text-align: right; padding-left: 2%;" class="totalDineroCompra">						
						 Total: <p:outputLabel value="#{compraView.totalValuacionArticulos}" styleClass="totalDineroCompra">  </p:outputLabel>	
						</td>					
					</tr>
					<tr >	
					<td >
						<p:dataTable   value="#{compraView.articulos}" var="articulo" id="tablaArticulos" >							
							<p:column headerText="PRODUCTO" width="30%">
								<h:outputText value="#{articulo}" />
							</p:column>
							<p:column headerText="DESCRIPCION" width="50">
								<h:outputText value="#{articulo.descripcion}" />
							</p:column>
							<p:column headerText="VALOR" width="10%">
								<span style="text-align: right; padding-right: 5%">
									<h:outputText value="#{articulo.cotizacion}"  />
								</span>
							</p:column>
						</p:dataTable>
						</td>
					</tr>				
				</table>
			</td>
		</tr>
		
	</table>


	
</h:form>

</f:view>

</html>

